<!DOCTYPE html>
<html>

<head>
  <title>Add Foodstore</title>
  <link rel="SHORTCUT ICON" href="images/mascot.jpg" type="image/x-icon" />

  <meta charset="UTF-8" />
  
  <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.4/leaflet.css" />
		 <!--[if lte IE 8]>
			 <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.4/leaflet.ie.css" />
		 <![endif]-->

  <style type="text/css">
  body{
    margin: 0px;
    background-color: #C0C0C0;
    min-width: 1024px;
  }
  #main{
    position: absolute;
    width: 70%;
    left: 15%;
    background-color: #FFFFFF;
  }
  .input{
    font-size: large;
    padding: 3px;
    color: #C0C0C0;
    -moz-border-radius: 10px; /* Firefox */
    -webkit-border-radius: 10px; /* Safari, Chrome */
    -khtml-border-radius: 10px; /* Konqueror */
    border-radius: 10px; /* CSS3 */
  }

  </style>
  <script type="text/javascript" src="includes/addInput.js"></script>
  <script type="text/javascript" src="includes/jquery.js"></script>
  <script src="http://cdn.leafletjs.com/leaflet-0.4/leaflet.js"></script>
  <script type="text/javascript">
    function getLon(param){
    	var startPoint = param.indexOf("(");
    	var endPoint = param.indexOf(",");
    	return param.slice(startPoint+1, endPoint);
    }
    function getLat(param){
    	var startPoint = param.indexOf(",");
    	return param.slice(startPoint+2, param.length-1);
    }
    
    $(document).ready(function(){
    			$("#map").hide();

    			$("#showMap").toggle(function(){
    				$("#map").show(650);
    			},function(){
    				$("#map").hide(650);
    			});
    		})
  </script>
</head>

<body>

<div id="main">
<h1 align="center">Add New Foodstore</h1>
<img align="right" style="position: absolute; top: 10px; left: 72%;" src="images/mascot.jpg" height="180px" />

<table width="100%" cellspacing="10px" style="width: 70%; margin: 5% 15%;">
<tr>
  <td colspan="3" align="center"><h2>General Information</h2></td>
</tr>
<tr>
  <td colspan="2" align="center"><input id="name" class="input" type="text" value="Name" onfocus="getFocus('Name','name')" onblur="loseFocus('Name','name')" /></td>
  <td align="center"><select id="category" class="input" style="color: #000000; width: 210px;"><option value="Category">Category</option><option value="Supermarket">Supermarket</option><option value="Restaurant">Restaurant</option><option value="Fast Food">Fast Food</option><option>Bakery/Caf&eacute;</option></select></td>
</tr>
<tr>
  <td align="center" colspan="2" ><input id="lat" class="input" type="text" value="Latitude" style="color: #000000;" onfocus="getFocus('Latitude', 'lat')" onblur="loseFocus('Latitude', 'lat')" /></td>
  <td align="center"><input id="lon" class="input" type="text" value="Longitude" style="color: #000000;" onfocus="getFocus('Longitude', 'lon')" onblur="loseFocus('Longitude', 'lon')" /></td>
</tr>
<tr>
  <td colspan="3" align="center"><a href="" id="showMap">Set Coordinates Manually</a></td>
</tr>
<tr>
  <td colspan="3">
    <div id="map" style="width: 100%; height: 200px">
      <script type="text/javascript">
					var map = L.map('map').setView([51.9614, 7.62537], 13);

					L.tileLayer('http://{s}.tile.cloudmade.com/4e9f46a5a49047b8b0f739ec77a9d272/997/256/{z}/{x}/{y}.png', {
					attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery ?<a href="http://cloudmade.com">CloudMade</a>',
					maxZoom: 18
					}).addTo(map);

					var marker = L.marker([51.9614, 7.62537],{draggable: true}).addTo(map);
					
					marker.on('dragend', setCoordinates);
					
					function setCoordinates(e){
            document.getElementById('lat').value = getLat(marker.getLatLng() + ""); 
            document.getElementById('lon').value = getLon(marker.getLatLng() + ""); 
          }



	</script>
    </div>
  </td>
</tr>
<tr>
  <td colspan="3"><hr /></td>
</tr>
<tr>
  <td colspan="3" align="center"><h2>Opening Times</h2></td>
</tr>
<tr>
  <td colspan="3" align="center">Please enter the time in the format <i>hh:mm</i> (24h)</td>
</tr>
<tr>
  <td align="center"><input id="mfo" class="input" type="text" value="Monday-Friday Opentime" onfocus="getFocus('Monday-Friday Opentime','mfo')" onblur="loseFocus('Monday-Friday Opentime', 'mfo')" /></td>
  <td align="center"><h2>-</h2></td>
  <td align="center"><input id="mfc" class="input" type="text" value="Monday-Friday Closetime" onfocus="getFocus('Monday-Friday Closetime','mfc')" onblur="loseFocus('Monday-Friday Closetime', 'mfc')" /></td>
</tr>
<tr>
  <td align="center"><input id="sato" class="input" type="text" value="Saturday Opentime" onfocus="getFocus('Saturday Opentime','sato')" onblur="loseFocus('Saturday Opentime', 'sato')" /></td>
  <td align="center"><h2>-</h2></td>
  <td align="center"><input id="satc" class="input" type="text" value="Saturday Closetime" onfocus="getFocus('Saturday Closetime','satc')" onblur="loseFocus('Saturday Closetime', 'satc')" /></td>
</tr>
<tr>
  <td align="center"><input id="suno" class="input" type="text" value="Sunday Opentime" onfocus="getFocus('Sunday Opentime','suno')" onblur="loseFocus('Sunday Opentime', 'suno')" /></td>
  <td align="center"><h2>-</h2></td>
  <td align="center"><input id="sunc" class="input" type="text" value="Sunday Closetime" onfocus="getFocus('Sunday Closetime','sunc')" onblur="loseFocus('Sunday Closetime', 'sunc')" /></td>
</tr>
<tr>
  <td colspan="3"><hr /></td>
</tr>
<tr>
  <td colspan="3" align="center"><h2>Comments</h2></td>
</tr>
<tr>
  <td colspan="3" align="center"><textarea id="comments" rows="5" style="width: 90%;"></textarea></td>
</tr>
<tr>
  <td colspan="3" align="center"><input class="input" type="button" value="Save" style="width: 40%; color: #000000; background-color: #E4E4E4;" onclick="saveInputs()" onmouseover="this.style.backgroundColor = '#AFAFAF'" onmouseout="this.style.backgroundColor = '#E4E4E4'" /></td>
</tr>
</table>
</div>

</body>
</html>
